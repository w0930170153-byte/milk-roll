<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>YY Roll Cakeï½œè¨‚è³¼ç¶²</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --pink:#ff9db5;
      --pink2:#ffd6e2;
      --cream:#fff7f3;
      --dark:#3a2f2f;
      --shadow: 0 12px 28px rgba(0,0,0,.10);
    }

    body{
      font-family: "Noto Sans TC", system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
      background: radial-gradient(1200px 600px at 10% 0%, var(--pink2), transparent 70%),
                  radial-gradient(900px 500px at 90% 20%, #ffeef6, transparent 60%),
                  linear-gradient(135deg, #fff1f6, var(--cream));
      color: var(--dark);
      overflow-x: hidden;
    }

    /* å¯æ„›æ³¡æ³¡èƒŒæ™¯ */
    #bubbles{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
    }
    .bubble{
      position:absolute;
      bottom:-80px;
      border-radius:50%;
      opacity:.35;
      animation: rise linear infinite;
    }
    @keyframes rise{
      from { transform: translateY(0) scale(1); }
      to   { transform: translateY(-120vh) scale(1.4); }
    }

    .topbar{
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(255,255,255,.75);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(0,0,0,.06);
    }
    .brand{
      font-weight: 800;
      letter-spacing: .5px;
    }

    .hero{
      position: relative;
      z-index: 1;
      border-radius: 28px;
      background: linear-gradient(135deg, #ffb6c9, #ffe3ec);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .hero::after{
      content:"";
      position:absolute;
      right:-80px; top:-80px;
      width:260px; height:260px;
      border-radius: 50%;
      background: rgba(255,255,255,.35);
    }
    .hero h1{
      font-weight: 800;
      line-height: 1.15;
    }

    .btn-sweet{
      background: var(--pink);
      border: none;
      color:#fff;
      border-radius: 999px;
      padding: 10px 18px;
      font-weight: 800;
      box-shadow: 0 10px 18px rgba(255,157,181,.35);
    }
    .btn-sweet:hover{ opacity:.95; }

    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(0,0,0,.06);
      padding: 8px 12px;
      border-radius: 999px;
      font-weight: 700;
      font-size: 14px;
    }

    .card-soft{
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 22px;
      box-shadow: var(--shadow);
      overflow: hidden;
      transition: transform .25s ease;
      position: relative;
      z-index: 1;
    }
    .card-soft:hover{ transform: translateY(-4px); }

    .product-img{
      width: 100%;
      aspect-ratio: 4/3;
      object-fit: cover;
      background: #f5f5f5;
    }

    .badge-cute{
      position:absolute;
      top: 14px;
      left: 14px;
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 999px;
      padding: 6px 10px;
      font-weight: 900;
      font-size: 13px;
    }

    .cart-btn{
      position: relative;
      border: 1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.85);
      border-radius: 999px;
      padding: 8px 12px;
      display:inline-flex;
      align-items:center;
      gap:10px;
      font-weight: 900;
    }
    .cart-count{
      min-width: 22px;
      height: 22px;
      border-radius: 999px;
      background: var(--pink);
      color:#fff;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-size: 12px;
      padding: 0 6px;
    }

    .section-title{
      font-weight: 900;
      margin: 26px 0 14px;
    }

    .knowledge{
      background: rgba(255,255,255,.75);
      border: 1px dashed rgba(0,0,0,.12);
      border-radius: 22px;
      padding: 18px;
      box-shadow: 0 10px 22px rgba(0,0,0,.06);
    }
    .knowledge li{ margin: 6px 0; }

    .mini-note{
      font-size: 13px;
      opacity: .9;
    }

    .line{
      height: 1px;
      background: rgba(0,0,0,.08);
      margin: 14px 0;
    }

    /* Offcanvas è³¼ç‰©è»Š */
    .offcanvas{
      border-left: 1px solid rgba(0,0,0,.06);
      background: linear-gradient(180deg, #fff, #fff7fb);
    }
    .cart-row{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      padding: 12px;
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 16px;
      margin-bottom: 10px;
    }
    .cart-row .name{ font-weight: 900; }
    .cart-row .sub{ font-size: 13px; opacity:.85; }

    .qty-box{
      display:flex;
      align-items:center;
      gap:8px;
    }
    .qty-box button{
      width: 34px;
      height: 34px;
      border-radius: 10px;
      border: 1px solid rgba(0,0,0,.12);
      background: rgba(255,255,255,.90);
      font-weight: 900;
    }
    .qty-box input{
      width: 54px;
      text-align:center;
      border-radius: 10px;
      border: 1px solid rgba(0,0,0,.12);
      padding: 6px 6px;
      background: rgba(255,255,255,.95);
      font-weight: 900;
    }

    .total-box{
      border-radius: 18px;
      padding: 14px;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(0,0,0,.06);
      box-shadow: 0 10px 18px rgba(0,0,0,.06);
    }
    .total-box .big{
      font-weight: 900;
      font-size: 18px;
    }

    footer{
      opacity: .85;
      font-size: 13px;
    }

    .shake{ animation: pop .18s ease; }
    @keyframes pop{
      0%{ transform: scale(1); }
      50%{ transform: scale(1.10); }
      100%{ transform: scale(1); }
    }

    /* âœ… åŠ å…¥è³¼ç‰©è»Šé£›å…¥å‹•ç•« */
    .fly-item{
      position: fixed;
      z-index: 9999;
      pointer-events: none;
      width: 38px;
      height: 38px;
      border-radius: 999px;
      background: rgba(255,157,181,.95);
      display:flex;
      align-items:center;
      justify-content:center;
      color:#fff;
      font-weight: 900;
      box-shadow: 0 10px 20px rgba(0,0,0,.15);
      transform: translate(-50%, -50%);
      transition: transform .65s cubic-bezier(.2,.9,.25,1), opacity .65s ease;
      opacity: 1;
    }
  </style>
</head>

<body>
  <!-- æ³¡æ³¡èƒŒæ™¯ -->
  <div id="bubbles"></div>

  <!-- Topbar -->
  <div class="topbar">
    <div class="container py-2 d-flex align-items-center justify-content-between">
      <div class="d-flex align-items-center gap-2">
        <span class="brand">ğŸ° yy rollcake</span>
        <span class="chip">æ–°ç«¹è‡ªå–ï½œæ»¿ 2000 å…é‹</span>
      </div>

      <button class="cart-btn" id="cartBtn" type="button"
        data-bs-toggle="offcanvas" data-bs-target="#cartCanvas" aria-controls="cartCanvas">
        ğŸ›’ è³¼ç‰©è»Š
        <span class="cart-count" id="cartCount">0</span>
      </button>
    </div>
  </div>

  <main class="container py-4" style="position:relative; z-index:1;">
    <!-- Hero -->
    <section class="hero p-4 p-md-5 mb-4">
      <div class="row align-items-center g-3">
        <div class="col-md-7">
          <h1 class="mb-2">ç”Ÿä¹³æ²è¨‚è³¼ç¶²<br><span style="font-size:.75em; font-weight:900;">æ¿ƒéƒå¥¶é¦™ãƒ»å…¥å£å³åŒ–</span></h1>
          <p class="mb-3">é¸å¥½å£å‘³ â†’ åŠ å…¥è³¼ç‰©è»Š â†’ å¡«è³‡æ–™é€å‡ºè¨‚å–®ï¼ˆå®¢äººæœƒæ”¶åˆ°é€šçŸ¥ã€åº—å®¶ä¹Ÿæœƒæ”¶åˆ°è¨‚å–®å…§å®¹ï¼‰ã€‚</p>
          <div class="d-flex gap-2 flex-wrap">
            <a href="#menu" class="btn btn-sweet">é–‹å§‹é¸è³¼</a>
            <a href="#tips" class="btn btn-light" style="border-radius:999px; font-weight:900;">ä¿å­˜å°çŸ¥è­˜</a>
          </div>
          <div class="mt-3 d-flex gap-2 flex-wrap">
            <span class="chip">âœ… éŠ€è¡Œè½‰å¸³ä»˜æ¬¾</span>
            <span class="chip">âœ… è‡ªå–åœ°å€ï¼šæ–°ç«¹å¸‚é¦™å±±å€</span>
            <span class="chip">âœ… å†·å‡å®…é…ï¼ˆå¯è¨­å®šé‹è²»ï¼‰</span>
          </div>
        </div>
        <div class="col-md-5">
          <div class="knowledge">
            <div class="fw-bold mb-2">ğŸ“Œ ä¸‹å–®æé†’</div>
            <ul class="mb-0">
              <li>åŠ å…¥è³¼ç‰©è»Šå¾Œï¼Œå¯åœ¨è³¼ç‰©è»Šè£¡ <b>åŠ æ¸›æ•¸é‡</b>ã€<b>åˆªé™¤å•†å“</b></li>
              <li>å®…é…æ»¿ <b>2000</b> å…é‹ï¼ˆæœªæ»¿æœƒåŠ é‹è²»ï¼‰</li>
              <li>é€å‡ºè¨‚å–®å¾Œï¼š<b>å®¢äººæœƒæ”¶åˆ° Email é€šçŸ¥</b>ï¼Œåº—å®¶ä¹Ÿæœƒæ”¶åˆ°è¨‚å–®</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- èœå–® -->
    <h2 id="menu" class="section-title">ğŸŒ¸ ç”Ÿä¹³æ²èœå–®ï¼ˆ9 ç¨®å£å‘³ï¼‰</h2>
    <div class="row g-4">

      <!-- 1 -->
      <div class="col-md-4">
        <div class="card-soft">
          <div class="badge-cute">ğŸ® åŸå‘³</div>
          <img src="images/roll1.jpg" class="product-img" alt="åŸå‘³ç”Ÿä¹³æ²">
          <div class="p-3">
            <div class="d-flex align-items-start justify-content-between">
              <div>
                <div class="fw-bold fs-5">åŸå‘³ç”Ÿä¹³æ²</div>
                <div class="mini-note">æ¿ƒéƒå¥¶é¦™ï¼Œç´°ç·»æ»‘é †</div>
              </div>
              <div class="fw-bold">NT$ 330</div>
            </div>
            <button class="btn btn-sweet w-100 mt-3 addToCart" data-emoji="ğŸ®"
              data-id="vanilla" data-name="åŸå‘³ç”Ÿä¹³æ²" data-price="330">åŠ å…¥è³¼ç‰©è»Š</button>
          </div>
        </div>
      </div>

      <!-- 2 -->
      <div class="col-md-4">
        <div class="card-soft">
          <div class="badge-cute">ğŸ« å·§å…‹åŠ›</div>
          <img src="images/roll2.jpg" class="product-img" alt="å·§å…‹åŠ›ç”Ÿä¹³æ²">
          <div class="p-3">
            <div class="d-flex align-items-start justify-content-between">
              <div>
                <div class="fw-bold fs-5">å·§å…‹åŠ›ç”Ÿä¹³æ²</div>
                <div class="mini-note">å¯å¯é¦™æ¿ƒï¼Œç”œè€Œä¸è†©</div>
              </div>
              <div class="fw-bold">NT$ 330</div>
            </div>
            <button class="btn btn-sweet w-100 mt-3 addToCart" data-emoji="ğŸ«"
              data-id="choco" data-name="å·§å…‹åŠ›ç”Ÿä¹³æ²" data-price="330">åŠ å…¥è³¼ç‰©è»Š</button>
          </div>
        </div>
      </div>

      <!-- 3 -->
      <div class="col-md-4">
        <div class="card-soft">
          <div class="badge-cute">ğŸµ æŠ¹èŒ¶</div>
          <img src="images/roll3.jpg" class="product-img" alt="æŠ¹èŒ¶ç”Ÿä¹³æ²">
          <div class="p-3">
            <div class="d-flex align-items-start justify-content-between">
              <div>
                <div class="fw-bold fs-5">æŠ¹èŒ¶ç”Ÿä¹³æ²</div>
                <div class="mini-note">æ—¥å¼å›ç”˜ï¼ŒèŒ¶é¦™è¿·äºº</div>
              </div>
              <div class="fw-bold">NT$ 330</div>
            </div>
            <button class="btn btn-sweet w-100 mt-3 addToCart" data-emoji="ğŸµ"
              data-id="matcha" data-name="æŠ¹èŒ¶ç”Ÿä¹³æ²" data-price="330">åŠ å…¥è³¼ç‰©è»Š</button>
          </div>
        </div>
      </div>

      <!-- 4 -->
      <div class="col-md-4">
        <div class="card-soft">
          <div class="badge-cute">â˜•ï¸ ææ‹‰ç±³è˜‡</div>
          <img src="images/roll4.jpg" class="product-img" alt="ææ‹‰ç±³è˜‡ç”Ÿä¹³æ²">
          <div class="p-3">
            <div class="d-flex align-items-start justify-content-between">
              <div>
                <div class="fw-bold fs-5">ææ‹‰ç±³è˜‡ç”Ÿä¹³æ²</div>
                <div class="mini-note">å’–å•¡å¯å¯é¦™ï¼Œå±¤æ¬¡æ¿ƒéƒ</div>
              </div>
              <div class="fw-bold">NT$ 460</div>
            </div>
            <button class="btn btn-sweet w-100 mt-3 addToCart" data-emoji="â˜•ï¸"
              data-id="tiramisu" data-name="ææ‹‰ç±³è˜‡ç”Ÿä¹³æ²" data-price="460">åŠ å…¥è³¼ç‰©è»Š</button>
          </div>
        </div>
      </div>

      <!-- 5 -->
      <div class="col-md-4">
        <div class="card-soft">
          <div class="badge-cute">ğŸ  èŠ‹æ³¥</div>
          <img src="images/roll5.jpg" class="product-img" alt="èŠ‹æ³¥ç”Ÿä¹³æ²">
          <div class="p-3">
            <div class="d-flex align-items-start justify-content-between">
              <div>
                <div class="fw-bold fs-5">èŠ‹æ³¥ç”Ÿä¹³æ²</div>
                <div class="mini-note">é¦™ç”œèŠ‹æ³¥ï¼Œç¶¿å¯†ä¸è†©</div>
              </div>
              <div class="fw-bold">NT$ 460</div>
            </div>
            <button class="btn btn-sweet w-100 mt-3 addToCart" data-emoji="ğŸ "
              data-id="taro" data-name="èŠ‹æ³¥ç”Ÿä¹³æ²" data-price="460">åŠ å…¥è³¼ç‰©è»Š</button>
          </div>
        </div>
      </div>

      <!-- 6 -->
      <div class="col-md-4">
        <div class="card-soft">
          <div class="badge-cute">ğŸ“ è‰è“</div>
          <img src="images/roll6.jpg" class="product-img" alt="è‰è“ç”Ÿä¹³æ²">
          <div class="p-3">
            <div class="d-flex align-items-start justify-content-between">
              <div>
                <div class="fw-bold fs-5">è‰è“ç”Ÿä¹³æ²</div>
                <div class="mini-note">é…¸ç”œæ¸…çˆ½ï¼Œå¹¸ç¦çˆ†æ“Š</div>
              </div>
              <div class="fw-bold">NT$ 499</div>
            </div>
            <button class="btn btn-sweet w-100 mt-3 addToCart" data-emoji="ğŸ“"
              data-id="strawberry" data-name="è‰è“ç”Ÿä¹³æ²" data-price="499">åŠ å…¥è³¼ç‰©è»Š</button>
          </div>
        </div>
      </div>

      <!-- âœ… æ–°å¢ 7ï¼šç„¦ç³– -->
      <div class="col-md-4">
        <div class="card-soft">
          <div class="badge-cute">ğŸ® ç„¦ç³–</div>
          <img src="images/roll7.jpg" class="product-img" alt="ç„¦ç³–ç”Ÿä¹³æ²">
          <div class="p-3">
            <div class="d-flex align-items-start justify-content-between">
              <div>
                <div class="fw-bold fs-5">ç„¦ç³–ç”Ÿä¹³æ²</div>
                <div class="mini-note">ç„¦ç³–é¦™æ°£ï¼Œç”œç”œç™‚ç™’</div>
              </div>
              <div class="fw-bold">NT$ 360</div>
            </div>
            <button class="btn btn-sweet w-100 mt-3 addToCart" data-emoji="ğŸ®"
              data-id="caramel" data-name="ç„¦ç³–ç”Ÿä¹³æ²" data-price="360">åŠ å…¥è³¼ç‰©è»Š</button>
          </div>
        </div>
      </div>

      <!-- âœ… æ–°å¢ 8ï¼šå¡å£«é” -->
      <div class="col-md-4">
        <div class="card-soft">
          <div class="badge-cute">ğŸ¥š å¡å£«é”</div>
          <img src="images/roll8.jpg" class="product-img" alt="å¡å£«é”ç”Ÿä¹³æ²">
          <div class="p-3">
            <div class="d-flex align-items-start justify-content-between">
              <div>
                <div class="fw-bold fs-5">å¡å£«é”ç”Ÿä¹³æ²</div>
                <div class="mini-note">é¦™è‰å¡å£«é”ï¼Œæ»‘é †æ¿ƒåš</div>
              </div>
              <div class="fw-bold">NT$ 360</div>
            </div>
            <button class="btn btn-sweet w-100 mt-3 addToCart" data-emoji="ğŸ¥š"
              data-id="custard" data-name="å¡å£«é”ç”Ÿä¹³æ²" data-price="360">åŠ å…¥è³¼ç‰©è»Š</button>
          </div>
        </div>
      </div>

      <!-- âœ… æ–°å¢ 9ï¼šæ³°å¥¶ -->
      <div class="col-md-4">
        <div class="card-soft">
          <div class="badge-cute">ğŸ§‹ æ³°å¥¶</div>
          <img src="images/roll9.jpg" class="product-img" alt="æ³°å¥¶ç”Ÿä¹³æ²">
          <div class="p-3">
            <div class="d-flex align-items-start justify-content-between">
              <div>
                <div class="fw-bold fs-5">æ³°å¥¶ç”Ÿä¹³æ²</div>
                <div class="mini-note">èŒ¶é¦™å¥¶é¦™ï¼Œè¶…ç´šè€å–ç³»</div>
              </div>
              <div class="fw-bold">NT$ 360</div>
            </div>
            <button class="btn btn-sweet w-100 mt-3 addToCart" data-emoji="ğŸ§‹"
              data-id="thaitea" data-name="æ³°å¥¶ç”Ÿä¹³æ²" data-price="360">åŠ å…¥è³¼ç‰©è»Š</button>
          </div>
        </div>
      </div>

    </div>

    <!-- ä¿å­˜å°çŸ¥è­˜ -->
    <h2 id="tips" class="section-title">â„ï¸ ç”Ÿä¹³æ²ä¿å­˜å°çŸ¥è­˜</h2>
    <div class="knowledge">
      <ul class="mb-0">
        <li><b>å†·è—</b>ï¼šå»ºè­° 1â€“2 å¤©å…§é£Ÿç”¨ï¼Œå£æ„Ÿæœ€ç¶¿å¯†ã€‚</li>
        <li><b>å†·å‡</b>ï¼šå¯å»¶é•·ä¿å­˜ï¼Œé£Ÿç”¨å‰ç§»åˆ°å†·è—é€€å†° 2â€“4 å°æ™‚ã€‚</li>
        <li><b>æœ€ä½³å£æ„Ÿ</b>ï¼šé€€å†°å¾Œåˆ‡ç‰‡ï¼Œåˆ€å­å…ˆç”¨ç†±æ°´æ²–éæ›´å¥½åˆ‡ã€‚</li>
        <li><b>æ³¨æ„</b>ï¼šé¿å…åè¦†è§£å‡å†·å‡ï¼Œå®¹æ˜“å½±éŸ¿å£æ„Ÿã€‚</li>
      </ul>
    </div>

    <footer class="text-center mt-5 mb-2">
      Â© 2025 yy rollcake ç”Ÿä¹³æ²ï½œè‡ªå–åœ°å€ï¼šæ–°ç«¹å¸‚é¦™å±±å€ï¼ˆä¸‹å–®å¾Œä»¥è¨Šæ¯ç¢ºèªï¼‰
    </footer>
  </main>

  <!-- è³¼ç‰©è»Š Offcanvas -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="cartCanvas" aria-labelledby="cartCanvasLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title fw-bold" id="cartCanvasLabel">ğŸ›’ è³¼ç‰©è»Š</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="é—œé–‰"></button>
    </div>

    <div class="offcanvas-body">
      <div id="cartEmpty" class="text-center py-4" style="opacity:.85;">
        <div style="font-size:40px;">ğŸ°</div>
        <div class="fw-bold mt-2">é‚„æ²’æœ‰å•†å“å–”ï½</div>
        <div class="mini-note">å›åˆ°èœå–®é»ã€ŒåŠ å…¥è³¼ç‰©è»Šã€å§ï¼</div>
      </div>

      <div id="cartList"></div>

      <div class="line"></div>

      <!-- å–è²¨/å®…é… -->
      <div class="total-box mb-3">
        <div class="fw-bold mb-2">ğŸšš å–è²¨æ–¹å¼</div>

        <div class="d-flex gap-2 flex-wrap">
          <label class="chip" style="cursor:pointer;">
            <input class="form-check-input me-1" type="radio" name="shipType" value="pickup" checked>
            è‡ªå–ï¼ˆæ–°ç«¹å¸‚é¦™å±±å€ï¼‰
          </label>
          <label class="chip" style="cursor:pointer;">
            <input class="form-check-input me-1" type="radio" name="shipType" value="delivery">
            å†·å‡å®…é…
          </label>
        </div>

        <div class="mt-3">
          <label class="form-label fw-bold">å–è²¨æ—¥æœŸï¼ˆæˆ–å¸Œæœ›åˆ°è²¨æ—¥ï¼‰</label>
          <input type="date" class="form-control" id="pickupDate">
          <div class="mini-note mt-1">ï¼ˆæ—¥æœŸå¯å…ˆå¡«é è¨ˆçš„ï¼Œæˆ‘å€‘ä¹Ÿæœƒå†è·Ÿä½ ç¢ºèªï¼‰</div>
        </div>

        <div class="mt-3" id="addressBox" style="display:none;">
          <label class="form-label fw-bold">å®…é…åœ°å€</label>
          <input type="text" class="form-control mb-2" id="addressName" placeholder="æ”¶ä»¶äººå§“åï¼ˆå¿…å¡«ï¼‰">
          <input type="text" class="form-control mb-2" id="addressPhone" placeholder="æ”¶ä»¶äººé›»è©±ï¼ˆå¿…å¡«ï¼‰">
          <input type="text" class="form-control mb-2" id="addressFull" placeholder="å®Œæ•´åœ°å€ï¼ˆç¸£å¸‚/å€/è·¯/è™Ÿ/æ¨“ï¼Œå¿…å¡«ï¼‰">
          <div class="mini-note">æœªæ»¿ 2000 æœƒåŠ é‹è²»ï¼›æ»¿ 2000 å…é‹ã€‚</div>
        </div>
      </div>

      <!-- è¨‚è³¼äººè³‡æ–™ -->
      <div class="total-box mb-3">
        <div class="fw-bold mb-2">ğŸ§¾ è¨‚è³¼äººè³‡æ–™</div>
        <input type="text" class="form-control mb-2" id="custName" placeholder="è¨‚è³¼äººå§“åï¼ˆå¿…å¡«ï¼‰" required>
        <input type="tel" class="form-control mb-2" id="custPhone" placeholder="è¨‚è³¼äººé›»è©±ï¼ˆå¿…å¡«ï¼‰" required>
        <input type="email" class="form-control" id="custEmail" placeholder="è¨‚è³¼äºº Emailï¼ˆå¿…å¡«ï¼šç”¨ä¾†å¯„ç¢ºèªä¿¡ï¼‰" required>
      </div>

      <!-- é‡‘é¡å€ -->
      <div class="total-box mb-3">
        <div class="d-flex justify-content-between">
          <div>å°è¨ˆ</div>
          <div class="fw-bold">NT$ <span id="subTotal">0</span></div>
        </div>
        <div class="d-flex justify-content-between mt-1">
          <div>é‹è²» <span class="mini-note">(å®…é…æœªæ»¿2000)</span></div>
          <div class="fw-bold">NT$ <span id="shipFee">0</span></div>
        </div>
        <div class="line"></div>
        <div class="d-flex justify-content-between align-items-center">
          <div class="big">ç¸½é‡‘é¡</div>
          <div class="big">NT$ <span id="grandTotal">0</span></div>
        </div>
        <div class="mini-note mt-2">
          â€» é€å‡ºè¨‚å–®å¾Œï¼Œå®¢äººæœƒæ”¶åˆ° Email é€šçŸ¥ï¼›åº—å®¶ä¹Ÿæœƒæ”¶åˆ°è¨‚å–®å…§å®¹ã€‚
        </div>
      </div>

      <!-- ä»˜æ¬¾è³‡è¨Šï¼ˆéŠ€è¡Œè½‰å¸³ï¼‰ -->
      <div class="total-box mb-3">
        <div class="fw-bold mb-2">ğŸ¦ ä»˜æ¬¾æ–¹å¼ï¼šéŠ€è¡Œè½‰å¸³</div>
        <div class="mini-note">
          éŠ€è¡Œåç¨±ï¼šä¸­åœ‹ä¿¡è¨—<br>
          éŠ€è¡Œä»£ç¢¼ï¼š822<br>
          å¸³è™Ÿï¼š901565794604<br>
          æˆ¶åï¼šé™³æ˜“å‡Œ
        </div>
        <div class="mini-note mt-2">ï¼ˆå®Œæˆè½‰å¸³å¾Œå¯æä¾›æœ«äº”ç¢¼ï¼Œæ–¹ä¾¿å°å¸³ï¼‰</div>
      </div>

      <button class="btn btn-sweet w-100" id="submitOrderBtn">é€å‡ºè¨‚å–®ï¼ˆå¯„ä¿¡çµ¦åº—å®¶ï¼‹å®¢äººï¼‰</button>
      <div class="mini-note text-center mt-2" id="sendHint" style="opacity:.85;"></div>

      <div class="text-center mt-3">
        <button class="btn btn-outline-secondary btn-sm" id="clearCartBtn">æ¸…ç©ºè³¼ç‰©è»Š</button>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <script>
    /*********************
     * 0) æ³¡æ³¡èƒŒæ™¯
     *********************/
    (function makeBubbles(){
      const c = document.getElementById("bubbles");
      for(let i=0;i<22;i++){
        const b = document.createElement("div");
        b.className = "bubble";
        const size = Math.random()*32 + 18;
        b.style.width = size + "px";
        b.style.height = size + "px";
        b.style.left = (Math.random()*100) + "%";
        b.style.background = `rgba(255,157,181,${Math.random()*0.55 + 0.15})`;
        b.style.animationDuration = (Math.random()*6 + 6) + "s";
        b.style.animationDelay = (-Math.random()*10) + "s";
        c.appendChild(b);
      }
    })();

    /*********************
     * 1) ä½ çš„ EmailJS è¨­å®šï¼ˆå·²å¡«å¥½ï¼‰
     *********************/
    emailjs.init("lTjQlr749IV9zSp0c");               // âœ… Public Key
    const EMAILJS_SERVICE_ID = "service_mcvontk";    // âœ… Service ID
    const TEMPLATE_SHOP = "template_6ukpgyb";        // âœ… åº—å®¶æ”¶å–®æ¨¡æ¿ï¼ˆæ”¶ä»¶è€…è«‹åœ¨æ¨¡æ¿è¨­å®šå¡« yyrollcake@gmail.comï¼‰
    const TEMPLATE_CLIENT = "template_wdfonnc";      // âœ… å®¢äººé€šçŸ¥æ¨¡æ¿ï¼ˆæ”¶ä»¶è€…è«‹åœ¨æ¨¡æ¿è¨­å®šå¡« {{email}}ï¼‰

    /*********************
     * 2) é‹è²»è¦å‰‡ï¼ˆä½ å¯æ”¹ï¼‰
     *********************/
    const DELIVERY_FEE = 160;      // å®…é…æœªæ»¿å…é‹é–€æª»é‹è²»
    const FREE_SHIP_OVER = 2000;   // æ»¿å¤šå°‘å…é‹
    const PICKUP_ADDR = "æ–°ç«¹å¸‚é¦™å±±å€ï¼ˆè‡ªå–ï¼‰";
    const BANK_INFO =
`éŠ€è¡Œåç¨±ï¼šä¸­åœ‹ä¿¡è¨—
éŠ€è¡Œä»£ç¢¼ï¼š822
å¸³è™Ÿï¼š901565794604
æˆ¶åï¼šé™³æ˜“å‡Œ`;

    /*********************
     * 3) è³¼ç‰©è»Šè³‡æ–™ï¼ˆlocalStorageï¼‰
     *********************/
    const CART_KEY = "freshroll_cart_v2";
    let cart = loadCart(); // { id: {name, price, qty} }

    function loadCart(){
      try{ return JSON.parse(localStorage.getItem(CART_KEY)) || {}; }
      catch(e){ return {}; }
    }
    function saveCart(){ localStorage.setItem(CART_KEY, JSON.stringify(cart)); }

    /*********************
     * 4) å°å·¥å…·
     *********************/
    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }
    function getShipType(){
      const r = document.querySelector('input[name="shipType"]:checked');
      return r ? r.value : "pickup";
    }
    function countItems(){
      return Object.values(cart).reduce((sum, it)=> sum + it.qty, 0);
    }
    function calcSubTotal(){
      return Object.values(cart).reduce((sum, it)=> sum + it.price * it.qty, 0);
    }
    function calcShippingFee(subTotal){
      const type = getShipType();
      if(type !== "delivery") return 0;
      if(subTotal >= FREE_SHIP_OVER) return 0;
      return DELIVERY_FEE;
    }

    /*********************
     * 5) âœ… åŠ å…¥è³¼ç‰©è»Šé£›å…¥å‹•ç•«
     *********************/
    function flyToCart(startEl, emoji){
      const cartBtn = document.getElementById("cartBtn");
      if(!startEl || !cartBtn) return;

      const s = startEl.getBoundingClientRect();
      const t = cartBtn.getBoundingClientRect();

      const flyer = document.createElement("div");
      flyer.className = "fly-item";
      flyer.textContent = emoji || "ğŸ§";
      document.body.appendChild(flyer);

      // èµ·é»ï¼šæŒ‰éˆ•ä¸­å¿ƒ
      const startX = s.left + s.width/2;
      const startY = s.top + s.height/2;
      flyer.style.left = startX + "px";
      flyer.style.top  = startY + "px";

      // è®“ç€è¦½å™¨å…ˆç•«å‡ºèµ·é»ï¼Œå†åšå‹•ç•«
      requestAnimationFrame(()=>{
        // çµ‚é»ï¼šè³¼ç‰©è»ŠæŒ‰éˆ•ä¸­å¿ƒ
        const endX = t.left + t.width/2;
        const endY = t.top + t.height/2;

        const dx = endX - startX;
        const dy = endY - startY;

        flyer.style.transform = `translate(calc(-50% + ${dx}px), calc(-50% + ${dy}px)) scale(0.6)`;
        flyer.style.opacity = "0.15";
      });

      flyer.addEventListener("transitionend", ()=>{
        flyer.remove();
        const cc = document.getElementById("cartCount");
        cc.classList.remove("shake"); void cc.offsetWidth; cc.classList.add("shake");
      }, { once:true });
    }

    /*********************
     * 6) åŠ å…¥è³¼ç‰©è»Š
     *********************/
    document.querySelectorAll(".addToCart").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const id = btn.dataset.id;
        const name = btn.dataset.name;
        const price = parseInt(btn.dataset.price,10);
        const emoji = btn.dataset.emoji || "ğŸ§";

        if(!cart[id]) cart[id] = { name, price, qty: 1 };
        else cart[id].qty += 1;

        saveCart();
        renderCart();

        // âœ… é£›å…¥å‹•ç•«
        flyToCart(btn, emoji);
      });
    });

    /*********************
     * 7) å–è²¨æ–¹å¼åˆ‡æ›ï¼ˆè‡ªå–/å®…é…ï¼‰
     *********************/
    const addressBox = document.getElementById("addressBox");
    document.querySelectorAll('input[name="shipType"]').forEach(r=>{
      r.addEventListener("change", ()=>{
        addressBox.style.display = (getShipType() === "delivery") ? "block" : "none";
        renderCart();
      });
    });

    /*********************
     * 8) è³¼ç‰©è»Šæ¸²æŸ“ + é‹è²»è¨ˆç®—
     *********************/
    function renderCart(){
      const cartList = document.getElementById("cartList");
      const cartEmpty = document.getElementById("cartEmpty");
      const cartCountEl = document.getElementById("cartCount");

      const items = Object.entries(cart);
      const hasItems = items.length > 0;

      cartEmpty.style.display = hasItems ? "none" : "block";
      cartList.innerHTML = "";
      cartCountEl.textContent = String(countItems());

      if(hasItems){
        items.forEach(([id, it])=>{
          const row = document.createElement("div");
          row.className = "cart-row";
          row.innerHTML = `
            <div style="min-width: 170px;">
              <div class="name">${escapeHtml(it.name)}</div>
              <div class="sub">å–®åƒ¹ NT$ ${it.price}ï½œå°è¨ˆ NT$ ${it.price * it.qty}</div>
            </div>

            <div class="qty-box">
              <button type="button" aria-label="æ¸›å°‘">âˆ’</button>
              <input type="number" min="1" value="${it.qty}" />
              <button type="button" aria-label="å¢åŠ ">ï¼‹</button>
            </div>

            <button class="btn btn-outline-danger btn-sm" type="button">åˆªé™¤</button>
          `;

          const minusBtn = row.querySelectorAll("button")[0];
          const plusBtn  = row.querySelectorAll("button")[1];
          const delBtn   = row.querySelectorAll("button")[2];
          const qtyInput = row.querySelector("input");

          minusBtn.addEventListener("click", ()=>{
            cart[id].qty = Math.max(1, cart[id].qty - 1);
            saveCart(); renderCart();
          });
          plusBtn.addEventListener("click", ()=>{
            cart[id].qty += 1;
            saveCart(); renderCart();
          });
          qtyInput.addEventListener("input", ()=>{
            const v = parseInt(qtyInput.value,10);
            cart[id].qty = isNaN(v) ? 1 : Math.max(1, v);
            saveCart(); renderCart();
          });
          delBtn.addEventListener("click", ()=>{
            delete cart[id];
            saveCart(); renderCart();
          });

          cartList.appendChild(row);
        });
      }

      const subTotal = calcSubTotal();
      const shipFee = calcShippingFee(subTotal);
      const grandTotal = subTotal + shipFee;

      document.getElementById("subTotal").textContent = String(subTotal);
      document.getElementById("shipFee").textContent = String(shipFee);
      document.getElementById("grandTotal").textContent = String(grandTotal);

      const hint = document.getElementById("sendHint");
      if(getShipType() === "delivery"){
        hint.textContent = (subTotal >= FREE_SHIP_OVER)
          ? "âœ… å·²é”å…é‹é–€æª»ï¼ˆå®…é…å…é‹ï¼‰"
          : `ğŸ“¦ å®…é…æœªæ»¿ ${FREE_SHIP_OVER}ï¼ŒæœƒåŠ é‹è²» NT$ ${DELIVERY_FEE}`;
      }else{
        hint.textContent = "ğŸ¡ è‡ªå–ä¸éœ€é‹è²»ï¼ˆæ–°ç«¹å¸‚é¦™å±±å€ï¼‰";
      }
    }

    /*********************
     * 9) æ¸…ç©ºè³¼ç‰©è»Š
     *********************/
    document.getElementById("clearCartBtn").addEventListener("click", ()=>{
      if(!confirm("ç¢ºå®šè¦æ¸…ç©ºè³¼ç‰©è»Šå—ï¼Ÿ")) return;
      cart = {};
      saveCart();
      renderCart();
    });

    /*********************
     * 10) é€å‡ºè¨‚å–®ï¼ˆâœ… åº—å®¶æ”¶å–® + âœ… å®¢äººé€šçŸ¥ï¼‰
     *********************/
    document.getElementById("submitOrderBtn").addEventListener("click", async ()=>{
      const btn = document.getElementById("submitOrderBtn");

      try{
        if(Object.keys(cart).length === 0){
          alert("è³¼ç‰©è»Šæ˜¯ç©ºçš„ï¼Œè«‹å…ˆåŠ å…¥å•†å“å–”ï½");
          return;
        }

        const custName  = document.getElementById("custName").value.trim();
        const custPhone = document.getElementById("custPhone").value.trim();
        const custEmail = document.getElementById("custEmail").value.trim(); // âœ… å¿…å¡«

        if(!custName || !custPhone || !custEmail){
          alert("è«‹å¡«å¯«ï¼šè¨‚è³¼äººå§“å / é›»è©± / Emailï¼ˆéƒ½å¿…å¡«ï¼‰");
          return;
        }

        const shipType = getShipType();
        const pickupDate = document.getElementById("pickupDate").value || "æœªå¡«ï¼ˆå¾…ç¢ºèªï¼‰";

        // å®…é…è³‡æ–™ï¼ˆå®…é…å°±å¿…å¡«ï¼‰
        let addressText = PICKUP_ADDR;
        if(shipType === "delivery"){
          const n = document.getElementById("addressName").value.trim();
          const p = document.getElementById("addressPhone").value.trim();
          const a = document.getElementById("addressFull").value.trim();
          if(!n || !p || !a){
            alert("å®…é…è«‹å¡«å¯«ï¼šæ”¶ä»¶äººå§“å / é›»è©± / å®Œæ•´åœ°å€");
            return;
          }
          addressText = `æ”¶ä»¶äººï¼š${n}\né›»è©±ï¼š${p}\nåœ°å€ï¼š${a}`;
        }

        // å•†å“æ¸…å–®æ–‡å­—
        const productList = Object.values(cart)
          .map(it => `${it.name} x ${it.qty}ï¼ˆå–®åƒ¹ ${it.price}ï¼‰`)
          .join("\n");

        const subTotal = calcSubTotal();
        const shipFee = calcShippingFee(subTotal);
        const grandTotal = subTotal + shipFee;

        const orderId = "FR" + Date.now();
        const createdAt = new Date().toLocaleString("zh-TW");

        // âœ… é€™äº› key è¦å°ä¸Šä½  EmailJS æ¨¡æ¿è£¡çš„ {{è®Šæ•¸}}
        const templateParams = {
          order_id: orderId,
          created_at: createdAt,

          name: custName,
          phone: custPhone,
          email: custEmail,                 // âœ… å®¢äººæ”¶ä»¶ç”¨ï¼ˆå®¢äººæ¨¡æ¿ To Email è«‹å¡« {{email}}ï¼‰

          pickup_method: (shipType === "delivery") ? "å†·å‡å®…é…" : "è‡ªå–ï¼ˆæ–°ç«¹å¸‚é¦™å±±å€ï¼‰",
          pickup_date: pickupDate,
          address: addressText,

          product: productList,

          sub_total: String(subTotal),
          shipping_fee: String(shipFee),
          total: String(grandTotal),

          bank_info: BANK_INFO
        };

        btn.disabled = true;
        btn.textContent = "é€å‡ºä¸­â€¦è«‹ç¨ç­‰";

        // âœ… å…ˆå¯„çµ¦åº—å®¶ï¼ˆæ”¶ä»¶è€…åœ¨æ¨¡æ¿è¨­å®šå›ºå®š yyrollcake@gmail.comï¼‰
        await emailjs.send(EMAILJS_SERVICE_ID, TEMPLATE_SHOP, templateParams);

        // âœ… å†å¯„çµ¦å®¢äººï¼ˆæ”¶ä»¶è€…åœ¨æ¨¡æ¿è¨­å®šå¡« {{email}}ï¼‰
        await emailjs.send(EMAILJS_SERVICE_ID, TEMPLATE_CLIENT, templateParams);

        alert("âœ… ä¸‹å–®æˆåŠŸï¼å®¢äººèˆ‡åº—å®¶éƒ½å·²æ”¶åˆ° Email é€šçŸ¥ï½");

        // é€å‡ºå¾Œæ¸…ç©ºè³¼ç‰©è»Š
        cart = {};
        saveCart();
        renderCart();

        // æ¸…ç©ºæ¬„ä½ï¼ˆä½ è¦ä¿ç•™ä¹Ÿå¯ä»¥ï¼‰
        document.getElementById("pickupDate").value = "";
        document.getElementById("addressName").value = "";
        document.getElementById("addressPhone").value = "";
        document.getElementById("addressFull").value = "";

      }catch(err){
        console.error(err);
        alert("âŒ é€å‡ºå¤±æ•—ï¼šå¯èƒ½æ˜¯ EmailJS æ¨¡æ¿æ”¶ä»¶è€…è¨­å®š/æ¬Šé™/ç¶²è·¯å•é¡Œã€‚è«‹å†è©¦ä¸€æ¬¡ã€‚");
      }finally{
        btn.disabled = false;
        btn.textContent = "é€å‡ºè¨‚å–®";
      }
    });

    // åˆæ¬¡æ¸²æŸ“
    renderCart();
  </script>
</body>
</html>
